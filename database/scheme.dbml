// Use DBML to define your database structure
// Docs: https://dbml.dbdiagram.io/docs

Table follows {
  following_user_id integer
  followed_user_id integer
  created_at timestamp
}

Table users {
  id integer [primary key]
  first_name varchar
  last_name varchar
  email varchar
  profile_picture varchar
  created_at timestamp
}

Table posts {
  id integer [primary key]
  title varchar
  body text [note: 'Content of the post']
  user_id integer
  location_id integer
  photos varchar[]
  created_at timestamp
}

Table ratings {
  id integer [primary key]
  user_id integer
  post_id integer
  rating integer [note: 'min:1 max:5']
  created_at timestamp
}

Table comments {
  id integer [primary key]
  user_id integer
  post_id integer
  text text
  created_at timestamp
}

Table locations {
  id integer [primary key]
  name varchar
  description text
  latitude float
  longitude float
  photos varchar[]
  created_at timestamp
}

Table blob_storage {
  data bynary
}

Ref: posts.user_id > users.id
Ref: posts.location_id > locations.id
Ref: posts.photos > blob_storage.data

Ref: users.id < follows.following_user_id
Ref: users.profile_picture > blob_storage.data

Ref: users.id < follows.followed_user_id

Ref: ratings.user_id > users.id
Ref: ratings.post_id > posts.id

Ref: comments.user_id > users.id
Ref: comments.post_id > posts.id

Ref: locations.photos > blob_storage.data